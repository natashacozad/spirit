function updateViewportDimensions(){var e=window,o=document,i=o.documentElement,t=o.getElementsByTagName("body")[0];return{width:e.innerWidth||i.clientWidth||t.clientWidth,height:e.innerHeight||i.clientHeight||t.clientHeight}}function loadGravatars(){(viewport=updateViewportDimensions()).width>=768&&jQuery(".comment img[data-gravatar]").each(function(){jQuery(this).attr("src",jQuery(this).attr("data-gravatar"))})}var cssua=function(e,o,i){var t=/\s*([\-\w ]+)[\s\/\:]([\d_]+\b(?:[\-\._\/]\w+)*)/,n=/([\w\-\.]+[\s\/][v]?[\d_]+\b(?:[\-\._\/]\w+)*)/g,r=/\b(?:(blackberry\w*|bb10)|(rim tablet os))(?:\/(\d+\.\d+(?:\.\w+)*))?/,s=/\bsilk-accelerated=true\b/,l=/\bfluidapp\b/,d=/(\bwindows\b|\bmacintosh\b|\blinux\b|\bunix\b)/,a=/(\bandroid\b|\bipad\b|\bipod\b|\bwindows phone\b|\bwpdesktop\b|\bxblwp7\b|\bzunewp7\b|\bwindows ce\b|\bblackberry\w*|\bbb10\b|\brim tablet os\b|\bmeego|\bwebos\b|\bpalm|\bsymbian|\bj2me\b|\bdocomo\b|\bpda\b|\bchtml\b|\bmidp\b|\bcldc\b|\w*?mobile\w*?|\w*?phone\w*?)/,p=/(\bxbox\b|\bplaystation\b|\bnintendo\s+\w+)/,c={parse:function(e,o){var i={};if(o&&(i.standalone=o),!(e=(""+e).toLowerCase()))return i;for(var c,f,u=e.split(/[()]/),b=0,x=u.length;b<x;b++)if(b%2){var m=u[b].split(";");for(c=0,f=m.length;c<f;c++)if(t.exec(m[c])){var g=RegExp.$1.split(" ").join("_"),h=RegExp.$2;(!i[g]||parseFloat(i[g])<parseFloat(h))&&(i[g]=h)}}else if(m=u[b].match(n))for(c=0,f=m.length;c<f;c++)(g=m[c].split(/[\/\s]+/)).length&&"mozilla"!==g[0]&&(i[g[0].split(" ").join("_")]=g.slice(1).join("-"));return a.exec(e)?(i.mobile=RegExp.$1,r.exec(e)&&(delete i[i.mobile],i.blackberry=i.version||RegExp.$3||RegExp.$2||RegExp.$1,RegExp.$1?i.mobile="blackberry":"0.0.1"===i.version&&(i.blackberry="7.1.0.0"))):p.exec(e)?(i.game=RegExp.$1,c=i.game.split(" ").join("_"),i.version&&!i[c]&&(i[c]=i.version)):d.exec(e)&&(i.desktop=RegExp.$1),i.intel_mac_os_x?(i.mac_os_x=i.intel_mac_os_x.split("_").join("."),delete i.intel_mac_os_x):i.cpu_iphone_os?(i.ios=i.cpu_iphone_os.split("_").join("."),delete i.cpu_iphone_os):i.cpu_os?(i.ios=i.cpu_os.split("_").join("."),delete i.cpu_os):"iphone"!==i.mobile||i.ios||(i.ios="1"),i.opera&&i.version?(i.opera=i.version,delete i.blackberry):s.exec(e)?i.silk_accelerated=!0:l.exec(e)&&(i.fluidapp=i.version),i.edge&&(delete i.applewebkit,delete i.safari,delete i.chrome,delete i.android),i.applewebkit?(i.webkit=i.applewebkit,delete i.applewebkit,i.opr&&(i.opera=i.opr,delete i.opr,delete i.chrome),i.safari&&(i.chrome||i.crios||i.fxios||i.opera||i.silk||i.fluidapp||i.phantomjs||i.mobile&&!i.ios?(delete i.safari,i.vivaldi&&delete i.chrome):i.safari=i.version&&!i.rim_tablet_os?i.version:{419:"2.0.4",417:"2.0.3",416:"2.0.2",412:"2.0",312:"1.3",125:"1.2",85:"1.0"}[parseInt(i.safari,10)]||i.safari)):i.msie||i.trident?(i.opera||(i.ie=i.msie||i.rv),delete i.msie,delete i.android,i.windows_phone_os?(i.windows_phone=i.windows_phone_os,delete i.windows_phone_os):"wpdesktop"!==i.mobile&&"xblwp7"!==i.mobile&&"zunewp7"!==i.mobile||(i.mobile="windows desktop",i.windows_phone=9>+i.ie?"7.0":10>+i.ie?"7.5":"8.0",delete i.windows_nt)):(i.gecko||i.firefox)&&(i.gecko=i.rv),i.rv&&delete i.rv,i.version&&delete i.version,i},format:function(e){var o,i="";for(o in e)if(o&&e.hasOwnProperty(o)){var t=o,n=e[o],r=" ua-"+(t=t.split(".").join("-"));if("string"==typeof n){for(var s=(n=n.split(" ").join("_").split(".").join("-")).indexOf("-");0<s;)r+=" ua-"+t+"-"+n.substring(0,s),s=n.indexOf("-",s+1);r+=" ua-"+t+"-"+n}i+=r}return i},encode:function(e){var o,i="";for(o in e)o&&e.hasOwnProperty(o)&&(i&&(i+="&"),i+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return i}};return c.userAgent=c.ua=c.parse(o,i),o=c.format(c.ua)+" js",e.className=e.className?e.className.replace(/\bno-js\b/g,"")+o:o.substr(1),c}(document.documentElement,navigator.userAgent,navigator.standalone);!function(e){e.isScrollToFixed=function(o){return!!e(o).data("ScrollToFixed")},e.ScrollToFixed=function(o,i){function t(){S.trigger("preUnfixed.ScrollToFixed"),p(),S.trigger("unfixed.ScrollToFixed"),j=-1,_=S.offset().top,y=S.offset().left,m.options.offsets&&(y+=S.offset().left-S.position().left),-1==k&&(k=y),g=S.css("position"),T=!0,-1!=m.options.bottom&&(S.trigger("preFixed.ScrollToFixed"),d(),S.trigger("fixed.ScrollToFixed"))}function n(){var e=m.options.limit;return e?"function"==typeof e?e.apply(S):e:0}function r(){return"fixed"===g}function s(){return"absolute"===g}function l(){return!(r()||s())}function d(){if(!r()){var e=S[0].getBoundingClientRect();U.css({display:S.css("display"),width:e.width,height:e.height,float:S.css("float")}),cssOptions={"z-index":m.options.zIndex,position:"fixed",top:-1==m.options.bottom?f():"",bottom:-1==m.options.bottom?"":m.options.bottom,"margin-left":"0px"},m.options.dontSetWidth||(cssOptions.width=S.css("width")),S.css(cssOptions),S.addClass(m.options.baseClassName),m.options.className&&S.addClass(m.options.className),g="fixed"}}function a(){var e=n(),o=y;m.options.removeOffsets&&(o="",e-=_),cssOptions={position:"absolute",top:e,left:o,"margin-left":"0px",bottom:""},m.options.dontSetWidth||(cssOptions.width=S.css("width")),S.css(cssOptions),g="absolute"}function p(){l()||(j=-1,U.css("display","none"),S.css({"z-index":v,width:"",position:h,left:"",top:F,"margin-left":""}),S.removeClass("scroll-to-fixed-fixed"),m.options.className&&S.removeClass(m.options.className),g=null)}function c(e){e!=j&&(S.css("left",y-e),j=e)}function f(){var e=m.options.marginTop;return e?"function"==typeof e?e.apply(S):e:0}function u(){if(e.isScrollToFixed(S)&&!S.is(":hidden")){var o=T,i=l();T?l()&&(_=S.offset().top,y=S.offset().left):t();var u=e(window).scrollLeft(),g=e(window).scrollTop(),w=n();m.options.minWidth&&e(window).width()<m.options.minWidth?l()&&o||(x(),S.trigger("preUnfixed.ScrollToFixed"),p(),S.trigger("unfixed.ScrollToFixed")):m.options.maxWidth&&e(window).width()>m.options.maxWidth?l()&&o||(x(),S.trigger("preUnfixed.ScrollToFixed"),p(),S.trigger("unfixed.ScrollToFixed")):-1==m.options.bottom?w>0&&g>=w-f()?i||s()&&o||(x(),S.trigger("preAbsolute.ScrollToFixed"),a(),S.trigger("unfixed.ScrollToFixed")):g>=_-f()?(r()&&o||(x(),S.trigger("preFixed.ScrollToFixed"),d(),j=-1,S.trigger("fixed.ScrollToFixed")),c(u)):l()&&o||(x(),S.trigger("preUnfixed.ScrollToFixed"),p(),S.trigger("unfixed.ScrollToFixed")):w>0?g+e(window).height()-S.outerHeight(!0)>=w-(f()||-b())?r()&&(x(),S.trigger("preUnfixed.ScrollToFixed"),"absolute"===h?a():p(),S.trigger("unfixed.ScrollToFixed")):(r()||(x(),S.trigger("preFixed.ScrollToFixed"),d()),c(u),S.trigger("fixed.ScrollToFixed")):c(u)}}function b(){return m.options.bottom?m.options.bottom:0}function x(){var e=S.css("position");"absolute"==e?S.trigger("postAbsolute.ScrollToFixed"):"fixed"==e?S.trigger("postFixed.ScrollToFixed"):S.trigger("postUnfixed.ScrollToFixed")}var m=this;m.$el=e(o),m.el=o,m.$el.data("ScrollToFixed",m);var g,h,w,F,v,T=!1,S=m.$el,_=0,y=0,k=-1,j=-1,U=null,A=function(e){S.is(":visible")&&(T=!1,u())},$=function(e){window.requestAnimationFrame?requestAnimationFrame(u):u()},O=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1};m.init=function(){m.options=e.extend({},e.ScrollToFixed.defaultOptions,i),v=S.css("z-index"),m.$el.css("z-index",m.options.zIndex),U=e("<div />"),g=S.css("position"),h=S.css("position"),w=S.css("float"),F=S.css("top"),l()&&m.$el.after(U),e(window).bind("resize.ScrollToFixed",A),e(window).bind("scroll.ScrollToFixed",$),"ontouchmove"in window&&e(window).bind("touchmove.ScrollToFixed",u),m.options.preFixed&&S.bind("preFixed.ScrollToFixed",m.options.preFixed),m.options.postFixed&&S.bind("postFixed.ScrollToFixed",m.options.postFixed),m.options.preUnfixed&&S.bind("preUnfixed.ScrollToFixed",m.options.preUnfixed),m.options.postUnfixed&&S.bind("postUnfixed.ScrollToFixed",m.options.postUnfixed),m.options.preAbsolute&&S.bind("preAbsolute.ScrollToFixed",m.options.preAbsolute),m.options.postAbsolute&&S.bind("postAbsolute.ScrollToFixed",m.options.postAbsolute),m.options.fixed&&S.bind("fixed.ScrollToFixed",m.options.fixed),m.options.unfixed&&S.bind("unfixed.ScrollToFixed",m.options.unfixed),m.options.spacerClass&&U.addClass(m.options.spacerClass),S.bind("resize.ScrollToFixed",function(){U.height(S.height())}),S.bind("scroll.ScrollToFixed",function(){S.trigger("preUnfixed.ScrollToFixed"),p(),S.trigger("unfixed.ScrollToFixed"),u()}),S.bind("detach.ScrollToFixed",function(o){O(o),S.trigger("preUnfixed.ScrollToFixed"),p(),S.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",A),e(window).unbind("scroll.ScrollToFixed",$),S.unbind(".ScrollToFixed"),U.remove(),m.$el.removeData("ScrollToFixed")}),A()},m.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},e.fn.scrollToFixed=function(o){return this.each(function(){new e.ScrollToFixed(this,o)})}}(jQuery),function(e,o){e.fn.nearest=function(i){function t(o){r=r?r.add(o):e(o)}var n,r,s,l,d,a=o.querySelectorAll;return this.each(function(){n=this,e.each(i.split(","),function(){if((l=e.trim(this)).indexOf("#"))for(d=n.parentNode;d;){if((s=a?d.querySelectorAll(l):e(d).find(l)).length){t(s);break}d=d.parentNode}else t(a?o.querySelectorAll(l):e(l))})}),r||e()}}(jQuery,document),jQuery(document).ready(function(e){e('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(o){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var i=e(this.hash);(i=i.length?i:e("[name="+this.hash.slice(1)+"]")).length&&(o.preventDefault(),e("html, body").animate({scrollTop:i.offset().top},1e3,function(){var o=e(i);return o.focus(),!o.is(":focus")&&(o.attr("tabindex","-1"),void o.focus())}))}})});var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(o,i,t){t||(t="Don't call this twice without a uniqueId"),e[t]&&clearTimeout(e[t]),e[t]=setTimeout(o,i)}}(),timeToWaitForLast=100;jQuery(document).ready(function(e){loadGravatars(),(viewport=updateViewportDimensions()).width>=768&&e("header.header").scrollToFixed()});